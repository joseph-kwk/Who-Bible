<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Who-Bible â€” Community</title>
  <link rel="icon" type="image/png" href="assets/images/logo.png" />
  <link rel="apple-touch-icon" href="assets/images/logo.png" />
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="stylesheet" href="assets/css/feedback-modal.css" />
  <link rel="stylesheet" href="assets/css/discussions.css" />
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  
  <script src="assets/js/firebase-config.js"></script>
  <script src="assets/js/remote-challenge.js" defer></script>
  <script src="assets/js/scenarios.js" defer></script>
  <script src="assets/js/locations.js" defer></script>
  <script src="assets/js/concepts.js" defer></script>
  <script src="assets/js/translations.js" defer></script>
  <script type="module">
    // Import and initialize discussions
    import { initDiscussionsUI } from './assets/js/community-discussions-ui.js';
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initDiscussionsUI);
    } else {
      initDiscussionsUI();
    }
  </script>
  <script src="assets/js/community.js" defer></script>
  <style>main{padding-top:16px}</style>
  <noscript><style>.requires-js{display:none}</style></noscript>
  <meta name="robots" content="noindex" />
</head>
<body>
  <div class="app">
    <div id="community-coming-soon" style="position:fixed;z-index:99999;top:0;left:0;width:100vw;height:100vh;background:rgba(20,20,30,0.97);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;">
      <img src="assets/images/logo.png" alt="Who-Bible Logo" style="width:80px;height:80px;margin-bottom:1.5rem;filter:drop-shadow(0 2px 8px #0002);" />
      <h1 style="color:var(--primary-color);font-size:2.2rem;margin-bottom:0.5rem;">Community Coming Soon</h1>
      <p style="color:var(--text-muted);font-size:1.15rem;max-width:420px;margin-bottom:2rem;">This section is still in development and not yet available. Please check back later for new features and live community play!</p>
      <a href="index.html" class="primary back-home-btn" style="padding:0.75em 2em;font-size:1.1rem;border-radius:8px;background:var(--primary-color);color:#fff;text-decoration:none;box-shadow:0 2px 8px #0002;font-weight:600;letter-spacing:0.03em;transition:background 0.2s,box-shadow 0.2s;">Back to Home</a>
    </div>
    <header>
      <div class="header-content">
        <a href="index.html" id="home-link" class="logo-section" aria-label="Home">
          <img src="assets/images/logo.png" alt="Who-Bible Logo" class="logo" />
          <div class="title-section">
            <h1 class="brand-title">Who-Bible</h1>
            <div class="muted brand-desc">A beautiful, accurate, and extensible Bible people challenge. Learn who did what, ages, mothers, occupations, and events â€” with verse references.</div>
          </div>
        </a>
        <div class="controls">
          <div class="language-selector">
            <select id="language-select">
              <option value="en">English</option>
              <option value="fr">FranÃ§ais</option>
              <option value="es">EspaÃ±ol</option>
            </select>
          </div>
          <nav class="site-nav" aria-label="Site">
            <a id="nav-community" href="community.html" class="nav-link active" aria-current="page">Community</a>
            <button id="btn-share" class="icon-btn" title="Share" aria-label="Share">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M12 3v12"/>
                <path d="M8 7l4-4 4 4"/>
                <path d="M5 13v5a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-5"/>
              </svg>
            </button>
          </nav>
          <button id="btn-theme" title="Toggle theme" class="theme-toggle" data-title-key="toggleTheme">
            <div class="theme-icon">
              <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"/>
                <line x1="12" y1="1" x2="12" y2="3"/>
                <line x1="12" y1="21" x2="12" y2="23"/>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                <line x1="1" y1="12" x2="3" y2="12"/>
                <line x1="21" y1="12" x2="23" y2="12"/>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
              </svg>
              <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
              </svg>
            </div>
          </button>
        </div>
      </div>
    </header>

    <!-- Community Guidelines Modal -->\n    <div id=\"guidelines-modal\" style=\"display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;\">\n      <div style=\"background: var(--bg); border-radius: 12px; max-width: 600px; max-height: 80vh; overflow-y: auto; padding: 32px; margin: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.5);\">\n        <div style=\"text-align: center; margin-bottom: 24px;\">\n          <h2 style=\"color: var(--accent); margin-bottom: 8px;\">ğŸ“– Community Guidelines</h2>\n          <p style=\"color: var(--muted); font-size: 14px;\">Growing in faith, together</p>\n        </div>\n\n        <div style=\"margin-bottom: 24px;\">\n          <h3 style=\"color: var(--accent); font-size: 18px; margin-bottom: 12px;\">âœ¨ Our Purpose</h3>\n          <p style=\"line-height: 1.6; color: var(--text);\">This community exists to help you <strong>grow in knowing the Bible and God</strong> while having fun! We're here to learn together, encourage one another, and celebrate our journey in faith.</p>\n        </div>\n\n        <div style=\"margin-bottom: 24px;\">\n          <h3 style=\"color: var(--accent); font-size: 18px; margin-bottom: 12px;\">ğŸ’– Our Values</h3>\n          <ul style=\"line-height: 1.8; color: var(--text); padding-left: 20px;\">\n            <li><strong>Biblical Truth:</strong> All content must be scripturally accurate</li>\n            <li><strong>Respect:</strong> Treat everyone with Christ-like love and kindness</li>\n            <li><strong>Encouragement:</strong> Build others up in their faith journey</li>\n            <li><strong>Fun:</strong> Enjoy learning and growing together</li>\n            <li><strong>Unity:</strong> Focus on what unites us, not what divides</li>\n          </ul>\n        </div>\n\n        <div style=\"margin-bottom: 24px;\">\n          <h3 style=\"color: #ff6b6b; font-size: 18px; margin-bottom: 12px;\">ğŸš« Not Allowed</h3>\n          <ul style=\"line-height: 1.8; color: var(--text); padding-left: 20px;\">\n            <li><strong>Harassment or bullying</strong> of any kind</li>\n            <li><strong>Profanity or inappropriate content</strong></li>\n            <li><strong>False teaching</strong> or misrepresenting Scripture</li>\n            <li><strong>Spam or self-promotion</strong></li>\n            <li><strong>Cheating</strong> (sharing answers, score manipulation)</li>\n            <li><strong>Denominational attacks</strong> or divisive arguments</li>\n            <li><strong>Offensive usernames</strong> or impersonation</li>\n            <li><strong>Sharing personal info</strong> (addresses, phone numbers)</li>\n          </ul>\n        </div>\n\n        <div style=\"margin-bottom: 24px;\">\n          <h3 style=\"color: var(--accent); font-size: 18px; margin-bottom: 12px;\">ğŸ›¡ï¸ Safety First</h3>\n          <ul style=\"line-height: 1.8; color: var(--text); padding-left: 20px;\">\n            <li>All interactions are family-friendly (ages 10+)</li>\n            <li>Report inappropriate behavior immediately</li>\n            <li>Block users who make you uncomfortable</li>\n            <li>Never share personal information publicly</li>\n          </ul>\n        </div>\n\n        <div style=\"padding: 16px; background: var(--bg-2); border-radius: 8px; border-left: 4px solid var(--accent); margin-bottom: 24px;\">\n          <p style=\"margin: 0; font-size: 14px; color: var(--text);\"><strong>\"Let your conversation be always full of grace, seasoned with salt, so that you may know how to answer everyone.\"</strong> - Colossians 4:6</p>\n        </div>\n\n        <div style=\"display: flex; gap: 12px; justify-content: center;\">\n          <button id=\"accept-guidelines-btn\" style=\"padding: 12px 32px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px;\">I Agree</button>\n          <button onclick=\"window.location.href='index.html'\" style=\"padding: 12px 32px; background: var(--bg-2); color: var(--text); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-size: 16px;\">Go Back</button>\n        </div>\n      </div>\n    </div>

    <main class="requires-js">
      <div class="community-panel" style="display:flex">
        <div class="community-header">
          <div class="community-title" id="community-title">Community</div>
        </div>
        <div class="community-content">
          <div class="community-hero" id="community-intro">Explore rooms, join live quizzes, and manage your profile.</div>
          <div class="community-tabs" role="tablist">
            <button id="tab-explore" class="tab-btn active" role="tab" aria-selected="true">Explore</button>
            <button id="tab-live" class="tab-btn" role="tab" aria-selected="false">Live</button>
            <button id="tab-discussions" class="tab-btn" role="tab" aria-selected="false" aria-controls="section-discussions">ğŸ’¬ Discussions</button>
            <button id="tab-locations" class="tab-btn" role="tab" aria-selected="false" aria-controls="section-locations" aria-label="Biblical Places - Explore locations with interactive map">Places</button>
            <button id="tab-concepts" class="tab-btn" role="tab" aria-selected="false" aria-controls="section-concepts" aria-label="Learn - Biblical concepts glossary">Learn</button>
            <button id="tab-profile" class="tab-btn" role="tab" aria-selected="false">Profile</button>
            <button id="tab-guidelines" class="tab-btn" role="tab" aria-selected="false">Guidelines</button>
          </div>
          <div class="community-sections">
            <section id="section-explore" class="community-section" role="tabpanel">
              <h3 id="featured-rooms-title">Featured Content</h3>
              <div class="cards" id="featured-rooms">
                <div class="card" data-feature="spotlight">
                  <div class="card-icon">ğŸ‘¥</div>
                  <div class="card-title">People Spotlight</div>
                  <div class="card-desc">Discover key Biblical figures and their stories. Learn about their roles, relationships, and notable events.</div>
                </div>
                <div class="card" data-feature="challenges">
                  <div class="card-icon">ğŸ†</div>
                  <div class="card-title">Challenge Boards</div>
                  <div class="card-desc">Test your knowledge with weekly quizzes and friendly competition. Track your progress and earn achievements.</div>
                </div>
                <div class="card" data-feature="study">
                  <div class="card-icon">ğŸ“š</div>
                  <div class="card-title">Study Groups</div>
                  <div class="card-desc">Join study sessions to learn together. Browse comprehensive profiles with verses and family relationships.</div>
                </div>
                <div class="card" data-feature="remote">
                  <div class="card-icon">ğŸŒ</div>
                  <div class="card-title">Remote Challenge</div>
                  <div class="card-desc">Play with friends anywhere! Create rooms with shareable links for real-time multiplayer quizzes.</div>
                </div>
              </div>
              
              <h3 style="margin-top: 32px;">Quick Stats</h3>
              <div class="stats-grid">
                <div class="stat-card">
                  <div class="stat-value" id="stat-people">73</div>
                  <div class="stat-label">Bible People</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value" id="stat-ot">63</div>
                  <div class="stat-label">Old Testament</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value" id="stat-nt">10</div>
                  <div class="stat-label">New Testament</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value" id="stat-verses">69+</div>
                  <div class="stat-label">With Verses</div>
                </div>
              </div>
            </section>
            <section id="section-live" class="community-section" role="tabpanel" style="display:none">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 12px;">
                <div>
                  <h3 id="live-rooms-title" style="margin: 0;">Live Rooms</h3>
                  <p id="live-rooms-desc" style="color: var(--muted); margin: 4px 0 0 0;">Join a live room or create your own!</p>
                </div>
                <button id="btn-create-room" class="primary" style="padding: 12px 24px; border-radius: 8px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; border: none; font-weight: 600; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: transform 0.2s, box-shadow 0.2s;">
                  ğŸ® Create Room
                </button>
              </div>
              <div id="live-rooms-list" class="cards" style="margin-bottom:24px"></div>
            </section>
            
            <!-- Discussions Section -->
            <section id="section-discussions" class="community-section" role="tabpanel" style="display:none">
              <!-- Discussion rooms will be rendered by community-discussions-ui.js -->
            </section>
            
            <!-- Locations Section -->
            <section id="section-locations" class="community-section" role="tabpanel" style="display:none">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 12px;">
                <div>
                  <h3 style="margin: 0;">Biblical Places</h3>
                  <p class="muted" style="margin: 4px 0 0 0;">Explore key locations with an interactive map</p>
                </div>
                <button id="btn-location-quiz" style="padding: 10px 20px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: transform 0.2s;">
                  ğŸ¯ Location Quiz
                </button>
              </div>
              
              <!-- Map Container -->
              <div id="locations-map-container" role="img" aria-label="Interactive map of biblical locations" style="width: 100%; height: 500px; margin-bottom: 24px; background: var(--bg-2); border: 2px solid var(--border); border-radius: 12px; overflow: hidden; position: relative;">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: var(--muted);">
                  <div style="font-size: 48px; margin-bottom: 12px;">ğŸ—ºï¸</div>
                  <div>Map loading...</div>
                </div>
              </div>
              
              <!-- Journey Paths Selector -->
              <div style="margin-bottom: 24px; padding: 16px; background: var(--glass); border-radius: 12px; border: 2px solid var(--border);">
                <div style="font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                  ğŸ›¤ï¸ Biblical Journeys
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                  <button class="journey-btn" data-journey="exodus" style="padding: 8px 16px; border-radius: 20px; border: 2px solid var(--border); background: var(--bg); color: var(--text); cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;">ğŸ“œ Exodus Route</button>
                  <button class="journey-btn" data-journey="paul" style="padding: 8px 16px; border-radius: 20px; border: 2px solid var(--border); background: var(--bg); color: var(--text); cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;">â›µ Paul's Journeys</button>
                  <button class="journey-btn" data-journey="jesus" style="padding: 8px 16px; border-radius: 20px; border: 2px solid var(--border); background: var(--bg); color: var(--text); cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;">âœï¸ Jesus' Ministry</button>
                  <button class="journey-btn" data-journey="abraham" style="padding: 8px 16px; border-radius: 20px; border: 2px solid var(--border); background: var(--bg); color: var(--text); cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;">ğŸŒŸ Abraham's Journey</button>
                  <button id="btn-clear-journey" style="padding: 8px 16px; border-radius: 20px; border: 2px solid var(--accent); background: transparent; color: var(--accent); cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.2s;">âœ• Clear</button>
                </div>
              </div>
              
              <!-- Filter Controls -->
              <div style="display: flex; gap: 12px; margin-bottom: 32px; flex-wrap: wrap;">
                <select id="testament-filter-locations" style="flex: 1; min-width: 150px; padding: 10px; border: 2px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);">
                  <option value="">All Testaments</option>
                  <option value="OT">Old Testament</option>
                  <option value="NT">New Testament</option>
                  <option value="OT & NT">Both</option>
                </select>
                <select id="importance-filter-locations" style="flex: 1; min-width: 150px; padding: 10px; border: 2px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);">
                  <option value="0">All Importance</option>
                  <option value="8">High (8+)</option>
                  <option value="9">Very High (9+)</option>
                  <option value="10">Critical (10)</option>
                </select>
                <button id="btn-reset-map" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">Reset Map</button>
              </div>
              
              <!-- Location Cards -->
              <div id="locations-list" class="locations-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;"></div>
            </section>
            
            <!-- Concepts/Glossary Section -->
            <section id="section-concepts" class="community-section" role="tabpanel" style="display:none">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 12px;">
                <div>
                  <h3 style="margin: 0;">Biblical Concepts Glossary</h3>
                  <p class="muted" style="margin: 4px 0 0 0;">Learn key theological concepts</p>
                </div>
                <div style="display: flex; gap: 8px;">
                  <button id="btn-flashcard-mode" style="padding: 10px 20px; background: var(--bg-2); color: var(--text); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s;">
                    ğŸ´ Flashcards
                  </button>
                  <button id="btn-concept-quiz" style="padding: 10px 20px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                    ğŸ¯ Concept Quiz
                  </button>
                </div>
              </div>
              
              <!-- Flashcard Mode -->
              <div id="flashcard-container" style="display: none; margin-bottom: 32px;">
                <div style="background: var(--glass); border: 2px solid var(--border); border-radius: 16px; padding: 40px; text-align: center; min-height: 300px; display: flex; flex-direction: column; justify-content: center; position: relative; cursor: pointer; transition: transform 0.3s;">
                  <div id="flashcard-term" style="font-size: 28px; font-weight: bold; color: var(--accent); margin-bottom: 24px;"></div>
                  <div id="flashcard-definition" style="font-size: 18px; line-height: 1.6; color: var(--text); display: none;"></div>
                  <div id="flashcard-hint" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: var(--muted); font-size: 14px;">Click to reveal</div>
                  <div style="position: absolute; top: 20px; right: 20px; background: var(--bg-2); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; color: var(--muted);">
                    <span id="flashcard-progress">1 / 10</span>
                  </div>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 20px; justify-content: center;">
                  <button id="btn-flashcard-prev" style="padding: 12px 24px; background: var(--bg-2); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; font-weight: 600; color: var(--text);">â† Previous</button>
                  <button id="btn-flashcard-shuffle" style="padding: 12px 24px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">ğŸ”€ Shuffle</button>
                  <button id="btn-flashcard-next" style="padding: 12px 24px; background: var(--bg-2); border: 2px solid var(--border); border-radius: 8px; cursor: pointer; font-weight: 600; color: var(--text);">Next â†’</button>
                </div>
              </div>
              
              <!-- Search and Filters -->
              <div id="concepts-controls" style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                <input id="concept-search" type="text" placeholder="Search concepts..." aria-label="Search biblical concepts" style="flex: 2; min-width: 200px; padding: 10px 16px; border: 2px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);" />
                <select id="difficulty-filter-concepts" aria-label="Filter by difficulty level" style="flex: 1; min-width: 150px; padding: 10px; border: 2px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);">
                  <option value="">All Levels</option>
                  <option value="Beginner">Beginner</option>
                  <option value="Intermediate">Intermediate</option>
                  <option value="Advanced">Advanced</option>
                  <option value="Expert">Expert</option>
                </select>
                <button id="btn-random-concept" aria-label="Show random biblical concept" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">ğŸ² Random</button>
              </div>
              
              <!-- Concepts List -->
              <div id="concepts-list" class="concepts-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px;"></div>
            </section>
            
            <section id="section-profile" class="community-section" role="tabpanel" style="display:none">
              <h3 id="profile-title">Your Profile</h3>
              <div class="profile-form">
                <!-- Avatar Section -->
                <div class="avatar-row" style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding: 20px; background: var(--glass); border-radius: 12px; border: 2px solid var(--border);">
                  <div style="position: relative;">
                    <div id="avatar-preview" class="avatar" aria-label="Avatar" role="img" style="width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.2); border: 3px solid var(--bg);">WB</div>
                    <div id="avatar-icon" style="position: absolute; bottom: -4px; right: -4px; width: 32px; height: 32px; background: var(--card); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; border: 2px solid var(--bg); box-shadow: 0 2px 6px rgba(0,0,0,0.2);">ğŸ“–</div>
                  </div>
                  <div style="flex: 1;">
                    <button id="btn-generate-avatar" class="small-btn" type="button" style="margin-bottom: 8px; padding: 8px 16px; border-radius: 6px; background: var(--accent); color: white; border: none; cursor: pointer; font-weight: 600; font-size: 14px;">ğŸ¨ Change Avatar Style</button>
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                      <button class="avatar-icon-btn" data-icon="ğŸ“–" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--bg-2); cursor: pointer; font-size: 16px; transition: all 0.2s;" title="Book">ğŸ“–</button>
                      <button class="avatar-icon-btn" data-icon="âœï¸" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--bg-2); cursor: pointer; font-size: 16px; transition: all 0.2s;" title="Cross">âœï¸</button>
                      <button class="avatar-icon-btn" data-icon="ğŸ•Šï¸" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--bg-2); cursor: pointer; font-size: 16px; transition: all 0.2s;" title="Dove">ğŸ•Šï¸</button>
                      <button class="avatar-icon-btn" data-icon="â›ª" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--bg-2); cursor: pointer; font-size: 16px; transition: all 0.2s;" title="Church">â›ª</button>
                      <button class="avatar-icon-btn" data-icon="ğŸ™" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--bg-2); cursor: pointer; font-size: 16px; transition: all 0.2s;" title="Praying Hands">ğŸ™</button>
                      <button class="avatar-icon-btn" data-icon="ğŸ‘‘" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--bg-2); cursor: pointer; font-size: 16px; transition: all 0.2s;" title="Crown">ğŸ‘‘</button>
                    </div>
                  </div>
                </div>
                
                <!-- Basic Info -->
                <div class="row" style="margin-bottom: 16px;">
                  <label for="display-name" id="profile-name-label" style="display: block; margin-bottom: 6px; font-weight: 600;">Display name</label>
                  <input id="display-name" type="text" placeholder="Your name" style="width: 100%; padding: 12px 16px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 16px;" />
                </div>
                <div class="row" style="margin-bottom: 24px;">
                  <label for="profile-bio" style="display: block; margin-bottom: 6px; font-weight: 600;">Bio (optional)</label>
                  <textarea id="profile-bio" rows="3" placeholder="Tell us about yourself..." style="width: 100%; padding: 12px 16px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 16px; resize: vertical; font-family: inherit;"></textarea>
                </div>
                
                <!-- Stats Overview -->
                <div style="margin-bottom: 24px;">
                  <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">ğŸ“Š Your Stats</h4>
                  <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
                    <div class="stat-card" style="background: var(--glass); padding: 16px; border-radius: 8px; text-align: center; border: 2px solid var(--border);">
                      <div class="stat-value" id="user-quizzes-played" style="font-size: 28px; font-weight: bold; color: var(--accent);">0</div>
                      <div class="stat-label" style="font-size: 13px; color: var(--muted); margin-top: 4px;">Quizzes Played</div>
                    </div>
                    <div class="stat-card" style="background: var(--glass); padding: 16px; border-radius: 8px; text-align: center; border: 2px solid var(--border);">
                      <div class="stat-value" id="user-best-score" style="font-size: 28px; font-weight: bold; color: var(--accent);">0</div>
                      <div class="stat-label" style="font-size: 13px; color: var(--muted); margin-top: 4px;">Best Score</div>
                    </div>
                    <div class="stat-card" style="background: var(--glass); padding: 16px; border-radius: 8px; text-align: center; border: 2px solid var(--border);">
                      <div class="stat-value" id="user-streak" style="font-size: 28px; font-weight: bold; color: var(--accent);">0</div>
                      <div class="stat-label" style="font-size: 13px; color: var(--muted); margin-top: 4px;">Best Streak</div>
                    </div>
                    <div class="stat-card" style="background: var(--glass); padding: 16px; border-radius: 8px; text-align: center; border: 2px solid var(--border);">
                      <div class="stat-value" id="user-accuracy" style="font-size: 28px; font-weight: bold; color: var(--accent);">0%</div>
                      <div class="stat-label" style="font-size: 13px; color: var(--muted); margin-top: 4px;">Accuracy</div>
                    </div>
                  </div>
                </div>
                
                <!-- Achievements -->
                <div style="margin-bottom: 24px;">
                  <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">ğŸ† Achievements</h4>
                  <div id="achievements-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px;"></div>
                </div>
                
                <!-- Learning Progress -->
                <div style="margin-bottom: 24px;">
                  <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">ğŸ“š Learning Progress</h4>
                  <div style="background: var(--glass); padding: 20px; border-radius: 12px; border: 2px solid var(--border);">
                    <div style="display: grid; gap: 16px;">
                      <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                          <span style="font-weight: 600;">People Mastered</span>
                          <span id="people-mastered" style="color: var(--accent); font-weight: 600;">0 / 73</span>
                        </div>
                        <div style="width: 100%; height: 8px; background: var(--bg-2); border-radius: 4px; overflow: hidden;">
                          <div id="people-progress-bar" style="height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); width: 0%; transition: width 0.3s;"></div>
                        </div>
                      </div>
                      <div>
                        <div style="font-weight: 600; margin-bottom: 8px;">Favorite Game Mode</div>
                        <div id="favorite-mode" style="color: var(--muted);">Play more to discover!</div>
                      </div>
                      <div>
                        <div style="font-weight: 600; margin-bottom: 8px;">Focus Areas</div>
                        <div id="weak-areas" style="color: var(--muted); font-size: 14px;">Complete more quizzes for personalized suggestions</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <button id="btn-save-profile" class="primary" type="button" style="width: 100%; padding: 14px; border-radius: 8px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; border: none; cursor: pointer; font-weight: 600; font-size: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: transform 0.2s;">ğŸ’¾ Save Profile</button>
                </div>
              </div>
            </section>
            <section id="section-guidelines" class="community-section" role="tabpanel" style="display:none">
              <h3 id="guidelines-title">Guidelines</h3>
              <ul id="guidelines-list">
                <li>Be respectful and kind.</li>
                <li>Stay on topic and avoid spoilers without warning.</li>
                <li>Report inappropriate content.</li>
              </ul>
            </section>
          </div>
        </div>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-top">
          <div class="footer-brand">
            <img src="assets/images/logo.png" alt="Who-Bible Logo" class="footer-logo" />
            <div class="footer-title">Who-Bible <span class="beta-badge" title="Beta - still in development">BETA</span></div>
          </div>
          <!-- No community link on this page -->
        </div>
        <div class="footer-bottom">
          <p>Â© <span id="footer-year"></span> Who-Bible | <button id="btn-feedback" class="footer-feedback-btn">Feedback</button></p>
        </div>
      </div>
    </footer>
  </div>

  <!-- Community Modal (for room details etc.) -->
  <div id="community-modal" class="modal-overlay" style="display:none">
    <div class="modal">
      <div class="modal-header">
        <h2 id="community-modal-title">Details</h2>
        <button id="btn-community-close" aria-label="Close">âœ•</button>
      </div>
      <div class="modal-body" id="community-modal-body"></div>
      <div class="modal-footer">
        <button id="btn-community-ok" class="primary">Close</button>
      </div>
    </div>
  </div>

  <!-- Feedback Modal -->
  <div id="feedback-modal" class="feedback-modal" style="display:none" role="dialog" aria-labelledby="feedback-title" aria-modal="true">
    <div class="feedback-content">
      <header class="feedback-header">
        <h2 id="feedback-title"><img src="assets/images/logo.png" alt="Who-Bible Logo" style="height:1.5em;vertical-align:middle;margin-right:0.5em;" /><span>We'd love your feedback!</span> <span class="beta-badge" title="Beta - still in development">BETA</span></h2>
        <button id="btn-feedback-close" class="close-feedback" aria-label="Close feedback">âœ•</button>
      </header>
      <main class="feedback-body">
        <p class="feedback-intro"><strong>We value your feedback!</strong><br>If you haven't explored all features, please try more modes before submitting feedback. You can always use the Feedback link in the footer at any time.</p>
        
        <div class="feedback-section">
          <label>Overall Experience</label>
          <div class="feedback-rating" id="rating-overall">
            <button class="rating-btn" data-rating="1" aria-label="1 star">ğŸ˜ </button>
            <button class="rating-btn" data-rating="2" aria-label="2 stars">ğŸ˜•</button>
            <button class="rating-btn" data-rating="3" aria-label="3 stars">ğŸ˜</button>
            <button class="rating-btn" data-rating="4" aria-label="4 stars">ğŸ™‚</button>
            <button class="rating-btn" data-rating="5" aria-label="5 stars">ğŸ¤©</button>
          </div>
        </div>

        <div class="feedback-grid">
          <div class="feedback-form-group">
            <label for="rating-modes">Game Modes</label>
            <select id="rating-modes">
              <option value="" disabled selected>Select rating...</option>
              <option value="5">Excellent</option>
              <option value="4">Good</option>
              <option value="3">Average</option>
              <option value="2">Poor</option>
              <option value="1">Terrible</option>
            </select>
          </div>
          <div class="feedback-form-group">
            <label for="rating-accuracy">Question Accuracy</label>
            <select id="rating-accuracy">
              <option value="" disabled selected>Select rating...</option>
              <option value="5">Accurate</option>
              <option value="4">Mostly Accurate</option>
              <option value="3">Okay</option>
              <option value="2">Inaccurate</option>
              <option value="1">Very Inaccurate</option>
            </select>
          </div>
          <div class="feedback-form-group">
            <label for="rating-scenarios">Scenarios</label>
            <select id="rating-scenarios">
              <option value="" disabled selected>Select rating...</option>
              <option value="5">Engaging</option>
              <option value="4">Good</option>
              <option value="3">Okay</option>
              <option value="2">Boring</option>
              <option value="1">Confusing</option>
            </select>
          </div>
        </div>

        <div class="feedback-form-group">
          <label for="feedback-message">Comments / Suggestions</label>
          <textarea id="feedback-message" rows="3" placeholder="Any specific feedback?"></textarea>
        </div>
      </main>
      <footer class="feedback-footer">
        <button id="btn-feedback-cancel" class="btn-cancel">Maybe Later</button>
        <button id="btn-feedback-submit" class="btn-submit">Send Feedback</button>
      </footer>
    </div>
  </div>

  <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- Join Room Modal -->
  <div id="join-room-modal" class="modal-overlay" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 3000; align-items: center; justify-content: center;">
    <div class="modal" style="background: var(--card); border-radius: 12px; padding: 0; max-width: 400px; width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
      <div class="modal-header" style="padding: 20px; border-bottom: 2px solid var(--border); background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-radius: 12px 12px 0 0;">
        <h2 style="margin: 0; color: white; font-size: 1.35rem;">ğŸ® Join Room</h2>
        <button id="btn-join-room-close" aria-label="Close" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: background 0.2s;">âœ•</button>
      </div>
      <div class="modal-body" style="padding: 24px;">
        <p style="margin: 0 0 16px 0; color: var(--muted);">Enter your name to join <strong id="join-room-code-display" style="color: var(--accent);"></strong></p>
        <input id="join-player-name" type="text" placeholder="Your name" style="width: 100%; padding: 12px 16px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 16px; margin-bottom: 16px;" />
        <div style="display: flex; gap: 12px; justify-content: flex-end;">
          <button id="btn-join-cancel" class="secondary" style="padding: 10px 20px; border-radius: 8px; border: 2px solid var(--border); background: transparent; color: var(--text); cursor: pointer; font-weight: 600;">Cancel</button>
          <button id="btn-join-confirm" class="primary" style="padding: 10px 24px; border-radius: 8px; background: var(--accent); color: white; border: none; cursor: pointer; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">Join Game</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Room Modal -->
  <div id="create-room-modal" class="modal-overlay" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 3000; align-items: center; justify-content: center;">
    <div class="modal" style="background: var(--card); border-radius: 12px; padding: 0; max-width: 450px; width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
      <div class="modal-header" style="padding: 20px; border-bottom: 2px solid var(--border); background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-radius: 12px 12px 0 0;">
        <h2 style="margin: 0; color: white; font-size: 1.35rem;">ğŸ® Create Room</h2>
        <button id="btn-create-room-close" aria-label="Close" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 4px;">âœ•</button>
      </div>
      <div class="modal-body" style="padding: 24px;">
        <div style="margin-bottom: 16px;">
          <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text);">Your Name</label>
          <input id="create-host-name" type="text" placeholder="Enter your name" style="width: 100%; padding: 12px 16px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 16px;" />
        </div>
        <div style="margin-bottom: 16px;">
          <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text);">Number of Questions</label>
          <select id="create-num-questions" style="width: 100%; padding: 12px 16px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 16px;">
            <option value="5">5 Questions</option>
            <option value="10" selected>10 Questions</option>
            <option value="15">15 Questions</option>
            <option value="20">20 Questions</option>
          </select>
        </div>
        <div style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text);">Difficulty</label>
          <select id="create-difficulty" style="width: 100%; padding: 12px 16px; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 16px;">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="hard">Hard</option>
          </select>
        </div>
        <div style="display: flex; gap: 12px; justify-content: flex-end;">
          <button id="btn-create-cancel" class="secondary" style="padding: 10px 20px; border-radius: 8px; border: 2px solid var(--border); background: transparent; color: var(--text); cursor: pointer; font-weight: 600;">Cancel</button>
          <button id="btn-create-confirm" class="primary" style="padding: 10px 24px; border-radius: 8px; background: var(--accent); color: white; border: none; cursor: pointer; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">Create Room</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Guidelines Section Content (hidden by default) -->
  <section id=\"section-guidelines\" class=\"community-section\" style=\"display: none;\" role=\"tabpanel\">\n    <div style=\"display: grid; gap: 20px; max-width: 800px; margin: 0 auto;\">\n      \n      <div class=\"card\" style=\"padding: 24px;\">\n        <div style=\"text-align: center; font-size: 48px; margin-bottom: 16px;\">âœ¨</div>\n        <h3 style=\"color: var(--accent); margin-bottom: 12px; text-align: center;\">Our Purpose</h3>\n        <p style=\"text-align: center; line-height: 1.8;\">This community exists to help you <strong>grow in knowing the Bible and God</strong> while having fun! We're here to learn together, encourage one another, and celebrate our journey in faith.</p>\n      </div>\n\n      <div class=\"card\" style=\"padding: 24px;\">\n        <h3 style=\"color: var(--accent); margin-bottom: 16px;\">ğŸ’– Core Values</h3>\n        <div style=\"display: grid; gap: 12px;\">\n          <div style=\"padding: 12px; background: var(--bg-2); border-radius: 8px; border-left: 3px solid var(--accent);\">\n            <strong>Biblical Truth:</strong> All content must be scripturally accurate\n          </div>\n          <div style=\"padding: 12px; background: var(--bg-2); border-radius: 8px; border-left: 3px solid var(--accent);\">\n            <strong>Respect:</strong> Treat everyone with Christ-like love and kindness\n          </div>\n          <div style=\"padding: 12px; background: var(--bg-2); border-radius: 8px; border-left: 3px solid var(--accent);\">\n            <strong>Encouragement:</strong> Build others up in their faith journey\n          </div>\n          <div style=\"padding: 12px; background: var(--bg-2); border-radius: 8px; border-left: 3px solid var(--accent);\">\n            <strong>Fun:</strong> Enjoy learning and growing together\n          </div>\n          <div style=\"padding: 12px; background: var(--bg-2); border-radius: 8px; border-left: 3px solid var(--accent);\">\n            <strong>Unity:</strong> Focus on what unites us, not what divides\n          </div>\n        </div>\n      </div>\n\n      <div class=\"card\" style=\"padding: 24px; border: 2px solid #ff6b6b;\">\n        <h3 style=\"color: #ff6b6b; margin-bottom: 16px;\">ğŸš« Prohibited Behaviors</h3>\n        <ul style=\"line-height: 2; padding-left: 20px;\">\n          <li>Harassment, bullying, or hateful speech</li>\n          <li>Profanity or inappropriate content</li>\n          <li>False teaching or misrepresenting Scripture</li>\n          <li>Spam, advertising, or self-promotion</li>\n          <li>Cheating (sharing answers, score manipulation)</li>\n          <li>Denominational attacks or divisive arguments</li>\n          <li>Offensive usernames or impersonation</li>\n          <li>Sharing personal information publicly</li>\n        </ul>\n      </div>\n\n      <div class=\"card\" style=\"padding: 24px; background: linear-gradient(135deg, var(--bg-2) 0%, var(--bg-3) 100%);\">\n        <h3 style=\"color: var(--accent); margin-bottom: 16px;\">ğŸ›¡ï¸ Safety & Privacy</h3>\n        <ul style=\"line-height: 2; padding-left: 20px;\">\n          <li><strong>Family-Friendly:</strong> Content appropriate for ages 10+</li>\n          <li><strong>Report System:</strong> Report inappropriate behavior immediately</li>\n          <li><strong>Block Feature:</strong> Block users who make you uncomfortable</li>\n          <li><strong>Privacy:</strong> Never share personal contact information</li>\n          <li><strong>Parental Guidance:</strong> Minors should use with adult supervision</li>\n        </ul>\n      </div>\n\n      <div class=\"card\" style=\"padding: 24px; text-align: center; border: 2px solid var(--accent);\">\n        <p style=\"font-size: 16px; line-height: 1.8; margin-bottom: 16px;\"><strong>\"Let your conversation be always full of grace, seasoned with salt, so that you may know how to answer everyone.\"</strong></p>\n        <p style=\"color: var(--muted);\">- Colossians 4:6</p>\n      </div>\n\n      <div class=\"card\" style=\"padding: 24px;\">\n        <h3 style=\"color: var(--accent); margin-bottom: 16px;\">âš ï¸ Consequences</h3>\n        <p style=\"margin-bottom: 12px;\">Violations may result in:</p>\n        <ol style=\"line-height: 2; padding-left: 20px;\">\n          <li><strong>Warning:</strong> First-time minor offenses</li>\n          <li><strong>Temporary Suspension:</strong> Repeated or moderate violations</li>\n          <li><strong>Permanent Ban:</strong> Severe or repeated serious violations</li>\n        </ol>\n        <p style=\"margin-top: 16px; padding: 12px; background: var(--bg-2); border-radius: 8px; font-size: 14px;\">We believe in grace and restoration. Contact admin if you have questions or concerns.</p>\n      </div>\n\n    </div>\n  </section>

</body>
</html>
