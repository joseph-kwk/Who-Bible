<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Who-Bible ‚Äî Community</title>
  <link rel="icon" type="image/png" href="assets/images/logo.png" />
  <link rel="apple-touch-icon" href="assets/images/logo.png" />
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="stylesheet" href="assets/css/feedback-modal.css" />
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  
  <script src="assets/js/firebase-config.js"></script>
  <script src="assets/js/scenarios.js" defer></script>
  <script src="assets/js/locations.js" defer></script>
  <script src="assets/js/concepts.js" defer></script>
  <script src="assets/js/translations.js" defer></script>
  <script src="assets/js/community.js" defer></script>
  <style>main{padding-top:16px}</style>
  <noscript><style>.requires-js{display:none}</style></noscript>
  <meta name="robots" content="noindex" />
</head>
<body>
  <div class="app">
    <header>
      <div class="header-content">
        <a href="index.html" id="home-link" class="logo-section" aria-label="Home">
          <img src="assets/images/logo.png" alt="Who-Bible Logo" class="logo" />
          <div class="title-section">
            <h1 class="brand-title">Who-Bible</h1>
            <div class="muted brand-desc">A beautiful, accurate, and extensible Bible people challenge. Learn who did what, ages, mothers, occupations, and events ‚Äî with verse references.</div>
          </div>
        </a>
        <div class="controls">
          <div class="language-selector">
            <select id="language-select">
              <option value="en">English</option>
              <option value="fr">Fran√ßais</option>
              <option value="es">Espa√±ol</option>
            </select>
          </div>
          <nav class="site-nav" aria-label="Site">
            <a id="nav-community" href="community.html" class="nav-link active" aria-current="page">Community</a>
            <button id="btn-share" class="icon-btn" title="Share" aria-label="Share">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M12 3v12"/>
                <path d="M8 7l4-4 4 4"/>
                <path d="M5 13v5a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-5"/>
              </svg>
            </button>
          </nav>
          <button id="btn-theme" title="Toggle theme" class="theme-toggle" data-title-key="toggleTheme">
            <div class="theme-icon">
              <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"/>
                <line x1="12" y1="1" x2="12" y2="3"/>
                <line x1="12" y1="21" x2="12" y2="23"/>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                <line x1="1" y1="12" x2="3" y2="12"/>
                <line x1="21" y1="12" x2="23" y2="12"/>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
              </svg>
              <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
              </svg>
            </div>
          </button>
        </div>
      </div>
    </header>

    <main class="requires-js">
      <div class="community-panel" style="display:flex">
        <div class="community-header">
          <div class="community-title" id="community-title">Community</div>
        </div>
        <div class="community-content">
          <div class="community-hero" id="community-intro">Explore rooms, join live quizzes, and manage your profile.</div>
          <div class="community-tabs" role="tablist">
            <button id="tab-explore" class="tab-btn active" role="tab" aria-selected="true">Explore</button>
            <button id="tab-live" class="tab-btn" role="tab" aria-selected="false">Live</button>
            <button id="tab-locations" class="tab-btn" role="tab" aria-selected="false" aria-controls="section-locations" aria-label="Biblical Places - Explore locations with interactive map">Places</button>
            <button id="tab-concepts" class="tab-btn" role="tab" aria-selected="false" aria-controls="section-concepts" aria-label="Learn - Biblical concepts glossary">Learn</button>
            <button id="tab-profile" class="tab-btn" role="tab" aria-selected="false">Profile</button>
            <button id="tab-guidelines" class="tab-btn" role="tab" aria-selected="false">Guidelines</button>
          </div>
          <div class="community-sections">
            <section id="section-explore" class="community-section" role="tabpanel">
              <h3 id="featured-rooms-title">Featured Content</h3>
              <div class="cards" id="featured-rooms">
                <div class="card" data-feature="spotlight">
                  <div class="card-icon">üë•</div>
                  <div class="card-title">People Spotlight</div>
                  <div class="card-desc">Discover key Biblical figures and their stories. Learn about their roles, relationships, and notable events.</div>
                </div>
                <div class="card" data-feature="challenges">
                  <div class="card-icon">üèÜ</div>
                  <div class="card-title">Challenge Boards</div>
                  <div class="card-desc">Test your knowledge with weekly quizzes and friendly competition. Track your progress and earn achievements.</div>
                </div>
                <div class="card" data-feature="study">
                  <div class="card-icon">üìö</div>
                  <div class="card-title">Study Groups</div>
                  <div class="card-desc">Join study sessions to learn together. Browse comprehensive profiles with verses and family relationships.</div>
                </div>
                <div class="card" data-feature="remote">
                  <div class="card-icon">üåê</div>
                  <div class="card-title">Remote Challenge</div>
                  <div class="card-desc">Play with friends anywhere! Create rooms with shareable links for real-time multiplayer quizzes.</div>
                </div>
              </div>
              
              <h3 style="margin-top: 32px;">Quick Stats</h3>
              <div class="stats-grid">
                <div class="stat-card">
                  <div class="stat-value" id="stat-people">73</div>
                  <div class="stat-label">Bible People</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value" id="stat-ot">63</div>
                  <div class="stat-label">Old Testament</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value" id="stat-nt">10</div>
                  <div class="stat-label">New Testament</div>
                </div>
                <div class="stat-card">
                  <div class="stat-value" id="stat-verses">69+</div>
                  <div class="stat-label">With Verses</div>
                </div>
              </div>
            </section>
            <section id="section-live" class="community-section" role="tabpanel" style="display:none">
              <h3 id="live-rooms-title">Live Rooms</h3>
              <p id="live-rooms-desc">Join a live room to play in real time.</p>
              <div id="live-rooms-list" class="cards" style="margin-bottom:24px"></div>
              
              <div class="host-room" style="margin-top:24px; padding: 24px; background: var(--glass); border-radius: 8px; text-align: center;">
                <h4 id="host-room-title" style="margin-top: 0;">Want to host a game?</h4>
                <p style="color: var(--muted); margin-bottom: 16px;">Create a room in the main app and invite friends!</p>
                <a href="index.html" class="primary" style="text-decoration: none; display: inline-block; padding: 12px 24px; border-radius: 8px; background: var(--accent); color: white;">Go to Main App</a>
              </div>
            </section>
            
            <!-- Locations Section -->
            <section id="section-locations" class="community-section" role="tabpanel" style="display:none">
              <h3>Biblical Places</h3>
              <p class="muted" style="margin-bottom: 20px;">Explore key locations from biblical history with an interactive map.</p>
              
              <!-- Map Container -->
              <div id="locations-map-container" role="img" aria-label="Interactive map of biblical locations" style="width: 100%; height: 750px; margin-bottom: 32px; background: var(--bg-2); border: 1px solid var(--border); border-radius: 8px; overflow: hidden;"></div>
              
              <!-- Filter Controls -->
              <div style="display: flex; gap: 12px; margin-bottom: 32px; flex-wrap: wrap;">
                <select id="testament-filter-locations" style="flex: 1; min-width: 150px; padding: 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);">
                  <option value="">All Testaments</option>
                  <option value="OT">Old Testament</option>
                  <option value="NT">New Testament</option>
                  <option value="OT & NT">Both</option>
                </select>
                <select id="importance-filter-locations" style="flex: 1; min-width: 150px; padding: 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);">
                  <option value="0">All Importance</option>
                  <option value="8">High (8+)</option>
                  <option value="9">Very High (9+)</option>
                  <option value="10">Critical (10)</option>
                </select>
                <button id="btn-reset-map" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 6px; cursor: pointer;">Reset Map</button>
              </div>
              
              <!-- Location Cards -->
              <div id="locations-list" class="locations-grid"></div>
            </section>
            
            <!-- Concepts/Glossary Section -->
            <section id="section-concepts" class="community-section" role="tabpanel" style="display:none">
              <h3>Biblical Concepts Glossary</h3>
              <p class="muted" style="margin-bottom: 20px;">Learn about key theological concepts and doctrines.</p>
              
              <!-- Search and Filters -->
              <div style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                <input id="concept-search" type="text" placeholder="Search concepts..." aria-label="Search biblical concepts" style="flex: 2; min-width: 200px; padding: 10px 16px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);" />
                <select id="difficulty-filter-concepts" aria-label="Filter by difficulty level" style="flex: 1; min-width: 150px; padding: 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text);">
                  <option value="">All Levels</option>
                  <option value="Beginner">Beginner</option>
                  <option value="Intermediate">Intermediate</option>
                  <option value="Advanced">Advanced</option>
                  <option value="Expert">Expert</option>
                </select>
                <button id="btn-random-concept" aria-label="Show random biblical concept" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 6px; cursor: pointer;">Random Concept</button>
              </div>
              
              <!-- Concepts List -->
              <div id="concepts-list" class="concepts-grid"></div>
            </section>
            
            <section id="section-profile" class="community-section" role="tabpanel" style="display:none">
              <h3 id="profile-title">Your Profile</h3>
              <div class="profile-form">
                <div class="avatar-row">
                  <div id="avatar-preview" class="avatar" aria-label="Avatar" role="img">WB</div>
                  <button id="btn-generate-avatar" class="small-btn" type="button">Generate Avatar</button>
                </div>
                <div class="row">
                  <label for="display-name" id="profile-name-label">Display name</label>
                  <input id="display-name" type="text" placeholder="Your name" />
                </div>
                <div class="row">
                  <label for="profile-bio">Bio (optional)</label>
                  <textarea id="profile-bio" rows="3" placeholder="Tell us about yourself..." style="width: 100%; padding: 12px 16px; border: 1px solid var(--border); border-radius: var(--border-radius); background: var(--glass); color: var(--text); font-size: 16px; resize: vertical; font-family: inherit;"></textarea>
                </div>
                <div class="row">
                  <label>Your Stats</label>
                  <div class="stats-grid" style="margin-top: 12px;">
                    <div class="stat-card">
                      <div class="stat-value" id="user-quizzes-played">0</div>
                      <div class="stat-label">Quizzes Played</div>
                    </div>
                    <div class="stat-card">
                      <div class="stat-value" id="user-best-score">0</div>
                      <div class="stat-label">Best Score</div>
                    </div>
                    <div class="stat-card">
                      <div class="stat-value" id="user-streak">0</div>
                      <div class="stat-label">Best Streak</div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <button id="btn-save-profile" class="primary" type="button">Save Profile</button>
                </div>
              </div>
            </section>
            <section id="section-guidelines" class="community-section" role="tabpanel" style="display:none">
              <h3 id="guidelines-title">Guidelines</h3>
              <ul id="guidelines-list">
                <li>Be respectful and kind.</li>
                <li>Stay on topic and avoid spoilers without warning.</li>
                <li>Report inappropriate content.</li>
              </ul>
            </section>
          </div>
        </div>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-top">
          <div class="footer-brand">
            <img src="assets/images/logo.png" alt="Who-Bible Logo" class="footer-logo" />
            <div class="footer-title">Who-Bible</div>
          </div>
          <!-- No community link on this page -->
        </div>
        <div class="footer-bottom">
          <p>¬© <span id="footer-year"></span> Who-Bible | <button id="btn-feedback" style="background:none;border:none;color:inherit;text-decoration:underline;cursor:pointer;font-size:inherit;font-family:inherit;padding:0;">Feedback</button></p>
        </div>
      </div>
    </footer>
  </div>

  <!-- Community Modal (for room details etc.) -->
  <div id="community-modal" class="modal-overlay" style="display:none">
    <div class="modal">
      <div class="modal-header">
        <h2 id="community-modal-title">Details</h2>
        <button id="btn-community-close" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body" id="community-modal-body"></div>
      <div class="modal-footer">
        <button id="btn-community-ok" class="primary">Close</button>
      </div>
    </div>
  </div>

  <!-- Feedback Modal -->
  <div id="feedback-modal" class="feedback-modal" role="dialog" aria-labelledby="feedback-title" aria-modal="true">
    <div class="feedback-content">
      <header class="feedback-header">
        <h2 id="feedback-title">We'd love your feedback!</h2>
        <button id="btn-feedback-close" class="close-feedback" aria-label="Close feedback">‚úï</button>
      </header>
      <main class="feedback-body">
        <p class="feedback-intro">Help us improve Who-Bible by sharing your thoughts.</p>
        
        <div class="feedback-section">
          <label>Overall Experience</label>
          <div class="feedback-rating" id="rating-overall">
            <button class="rating-btn" data-rating="1" aria-label="1 star">üò†</button>
            <button class="rating-btn" data-rating="2" aria-label="2 stars">üòï</button>
            <button class="rating-btn" data-rating="3" aria-label="3 stars">üòê</button>
            <button class="rating-btn" data-rating="4" aria-label="4 stars">üôÇ</button>
            <button class="rating-btn" data-rating="5" aria-label="5 stars">ü§©</button>
          </div>
        </div>

        <div class="feedback-grid">
          <div class="feedback-form-group">
            <label for="rating-modes">Game Modes</label>
            <select id="rating-modes">
              <option value="" disabled selected>Select rating...</option>
              <option value="5">Excellent</option>
              <option value="4">Good</option>
              <option value="3">Average</option>
              <option value="2">Poor</option>
              <option value="1">Terrible</option>
            </select>
          </div>
          <div class="feedback-form-group">
            <label for="rating-accuracy">Question Accuracy</label>
            <select id="rating-accuracy">
              <option value="" disabled selected>Select rating...</option>
              <option value="5">Accurate</option>
              <option value="4">Mostly Accurate</option>
              <option value="3">Okay</option>
              <option value="2">Inaccurate</option>
              <option value="1">Very Inaccurate</option>
            </select>
          </div>
          <div class="feedback-form-group">
            <label for="rating-scenarios">Scenarios</label>
            <select id="rating-scenarios">
              <option value="" disabled selected>Select rating...</option>
              <option value="5">Engaging</option>
              <option value="4">Good</option>
              <option value="3">Okay</option>
              <option value="2">Boring</option>
              <option value="1">Confusing</option>
            </select>
          </div>
        </div>

        <div class="feedback-form-group">
          <label for="feedback-message">Comments / Suggestions</label>
          <textarea id="feedback-message" rows="3" placeholder="Any specific feedback?"></textarea>
        </div>
      </main>
      <footer class="feedback-footer">
        <button id="btn-feedback-cancel" class="btn-cancel">Maybe Later</button>
        <button id="btn-feedback-submit" class="btn-submit">Send Feedback</button>
      </footer>
    </div>
  </div>

  <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

</body>
</html>
